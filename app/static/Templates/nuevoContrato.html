<!--<link href="css/angular-busy.css" />-->
<!-- <link href="css/dropzone/dropzone.css" rel="stylesheet" type="text/css" media="screen"/> -->
<link rel="stylesheet" href="css/upload.css">
<div ng-init="init()">
    <div class="page-title">
        <div class="pull-left">
            <h1 class="title">Crear Nuevo Contrato</h1>
        </div>
    </div>
    <!-- Prueba de nuevo cuadro para catalogo-->
    <section class="box ">
        <header class="panel_header">
            <h2 class="title pull-left">Seguimiento Creación de Contrato:</h2>
        </header>
        <div class="content-body">
            <div class="row">
                <div class="col-xs-12">
                    <form id="commentForm" novalidate="novalidate">
                        <div id="pills" class="wizardpills">
                            <ul class="form-wizard">
                                <li><a href="#cliente" data-toggle="tab"><span>Cliente</span></a></li>
                                <li><a href="#contrato" data-toggle="tab"><span>Contrato</span></a></li>
                                <li><a href="#limite" data-toggle="tab"><span>Límite</span></a></li>
                                <li><a href="#documentos" data-toggle="tab"><span>Documentos</span></a></li>
                                <li><a href="#confirmar" data-toggle="tab"><span>Confirmar</span></a></li>
                            </ul>
                            <div id="bar" class="progress active">
                                <div class="progress-bar progress-bar-primary " role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 100%;">
                                </div>
                            </div>
                            <div class="tab-content">
                                <div class="tab-pane" id="cliente">
                                    <h4>Buscar Cliente                    
                                    </h4>
                                    <div class="col-md-offset-10">
                                        <button class="btn btn-info" type="button" ng-click="BuscarCliente()">
                                            <span class="glyphicon glyphicon-search" aria-hidden="true"></span>&nbspBuscar Cliente</button>
                                    </div>
                                    <br>
                                    <!-- Fin Boton Busqueda-->
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Num. Cliente BPRO:</label>
                                                <p>{{datosCliente.idCliente}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Nombre:</label>
                                                <p>{{datosCliente.nombre}}</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">RFC:</label>
                                                <p>{{datosCliente.rfc}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Teléfono:</label>
                                                <p>{{datosCliente.telefono}}</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Correo:</label>
                                                <p>{{datosCliente.email}}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="contrato">
                                    <h4>Datos del Contrato:</h4>
                                    <br>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Tipo de Contrato:</label>
                                                <select class="form-control" ng-model="nuevoContrato.idTipoContrato" ng-options="tipoContrato.idTipoContrato as tipoContrato.nombreContrato for tipoContrato in listaTiposContrato" name="txtTipoContrato" ng-click="cargaDocTipoContrato(nuevoContrato)">
                                                    <option value="">Tipo de Contrato</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Empresa:</label>
                                                <select class="form-control" ng-model="nuevoContrato.idEmpresa" ng-options="tipoEmpresa.idEmpresa as tipoEmpresa.nombreEmpresa for tipoEmpresa in listaTiposEmpresa" ng-change="CargarSucursales(datosCliente.idCliente,nuevoContrato.idEmpresa)" id="cboEmpresa" name="txtEmpresa">
                                                    <option value="">Empresa</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Sucursal:</label>
                                                <select class="form-control" ng-model="nuevoContrato.idSucursal" ng-options="tipoSucursal.idSucursal as tipoSucursal.nombreSucursal for tipoSucursal in listaTiposSucursal" ng-change="CargarDepartamentos(datosCliente.idCliente,nuevoContrato.idEmpresa,nuevoContrato.idSucursal)" id="cboSucursal" name="txtSucursal">
                                                    <option value="">Sucursal</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Departamento:</label>
                                                <select class="form-control" ng-model="nuevoContrato.idDepartamento" ng-options="tipoDepartamento.idDepartamento as tipoDepartamento.nombreDepartamento for tipoDepartamento in listaTiposDepartamento" id="cboDepartamento" ng-change="cargarLimiteCredito(datosCliente.idCliente,nuevoContrato.idEmpresa,nuevoContrato.idSucursal,nuevoContrato.idDepartamento);cargarDatosContrato(nuevoContrato)" name="txtDepartamento">
                                                    <option value="">Departamento</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Ejemplo datepicker bootstrap-->
                                    <!--                                    yo modifique gib-->
                                    <div class="row">
                                        <div class="col-md-4">
                                            <p class="input-group">
                                                Fecha de inicio:
                                                <div class="input-group">
                                                    <input type="text" class="form-control datepicker" data-format="dd/mm/yyyy" ng-model="nuevoContrato.fechaInicio" name="txtInicio">
                                                </div>
                                            </p>
                                        </div>
                                        <div class="col-md-4">
                                            <p class="input-group">
                                                Fecha de término:
                                                <div class="input-group">
                                                    <input type="text" class="form-control datepicker" data-format="dd/mm/yyyy" ng-model="nuevoContrato.fechaTermino" name="txtFin" ng-change="validarFechar(nuevoContrato.fechaInicio,nuevoContrato.fechaTermino)">
                                                </div>
                                            </p>
                                        </div>
                                    </div>

                                    <!--                            aqui termine-->
                                </div>
                                <div class="tab-pane" id="limite">
                                    <h4>Límite de Crédito</h4>
                                    <!--br>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verLimiteCredito">Cartera:</label>
                                                <p>{{datosCredito[0].cartera}} {{datosCredito[0].descripcionCartera}}</p>
                                            </div>
                                        </div>
                                    </div-->
                                    <br>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label" ng-show="verLimiteCredito">Límite de Crédito:</label>
                                                <input type="text" class="form-control" id="limiteCredito" min="0" name="txtLimite" ng-model="datosCredito[0].limiteCredito" data-mask="fdecimal" placeholder="Mayor a cero" data-dec="," data-rad="." maxlength="18">
                                                <!--input type="text" class="form-control" id="limiteCredito" ng-model="datosCredito[0].limiteCredito" data-mask="fdecimal" placeholder="Mayor a cero" data-dec="," data-rad="." maxlength="18"-->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="documentos">
                                    <h4>Documentos Requeridos:</h4>
                                    <br>
                                    <p>
                                        <div class="row">
                                            <div class="col-xs-10">
                                                <div class="table-responsive">
                                                    <table class="table table-bordered">
                                                        <thead style="background-color: #F8F8F8;">
                                                            <tr>
                                                                <th>Documento</th>
                                                                <th>Obligatorio</th>
                                                                <th>Adjuntar Archivo</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="documento in listaDocumentos">
                                                                <td>{{ documento.nombre }}</td>
                                                                <td>{{ documento.obligatorio }}</td>
                                                                <td>
                                                                    <form id="upload_form">
                                                                        <div class="input-group">
                                                                            <label class="btn btn-info">
                                                                                <span class="fa fa-search"></span>
                                                                                <input type="file" ngf-select ng-model="file" name="file" ngf-pattern="'image/*'" accept="image/*" ngf-max-size="20MB" />
                                                                            </label>
                                                                            <input type="text" class="form-control filefield" readonly="">
                                                                            <!--="submit(this.file,600,documento.idDocumento)"-->
                                                                            <button type="submit" ng-click="submit(this.file,600,documento.idDocumento,documento )" class="btn btn-warning"><span class="fa fa-upload"></span></button>
                                                                        </div>
                                                                        <!--                                                                        <p>{{progress}}</p>-->
                                                                    </form>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </p>
                                </div>

                                <!-- INICIO CONFIRMAR DATOS-->
                                <div class="tab-pane" id="confirmar">
                                    <br>

                                    <div class="invoice-head row">
                                        <div class="col-xs-12 col-md-2 invoice-title">
                                            <h2 class="text-center bg-primary ">Confirmar Datos</h2>
                                        </div>
                                        <div class="col-xs-12 col-md-3 invoice-head-info">
                                            <span class="text-muted"></span>
                                        </div>
                                        <div class="col-xs-12 col-md-3 invoice-head-info"><span class="text-muted"><br></span></div>
                                    </div>
                                    <br>
                                    <br>
                                    <div class="well comment-block row level-1" style="display:inline-block;">
                                        <h3 class="mail_head">DATOS DEL CLIENTE</h3>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Num. Cliente BPRO:</label>
                                                <p>{{datosCliente.idCliente}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Nombre:</label>
                                                <p>{{datosCliente.nombre}}</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">RFC:</label>
                                                <p>{{datosCliente.rfc}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Teléfono:</label>
                                                <p>{{datosCliente.telefono}}</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Correo:</label>
                                                <p>{{datosCliente.email}}</p>
                                            </div>
                                        </div>
                                    </div>

                                    <br>
                                    <br>

                                    <div class="well comment-block row level-1" style="display:inline-block;">
                                        <h3 class="mail_head">DATOS DEL CONTRATO</h3>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <i class="pull-left fa fa-dollar icon-md icon-rounded icon-primary inviewport animated  animated-delay-1800ms animated-duration-1400ms visible zoomIn" data-vp-add-class="visible zoomIn"></i>
                                                <label class="control-label" ng-show="verDatos">Límite Crédito:</label>
                                                <p>{{datosCredito[0].limiteCredito}}</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Tipo Contrato:</label>
                                                <p>{{datContrato["0"].nomTipoContrato}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <br>
                                    <br>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Fecha Inicio:</label>
                                                <p>{{nuevoContrato.fechaInicio}}</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Fecha Término:</label>
                                                <p>{{nuevoContrato.fechaTermino}}</p>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Empresa:</label>
                                                <p>{{datContrato["0"].empNombre}}</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Sucursal:</label>
                                                <p>{{datContrato["0"].sucNombre}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Departamento:</label>
                                                <p>{{datContrato["0"].depNombre}}</p>
                                            </div>
                                        </div>
                                        <!--div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label" ng-show="verDatos">Cartera:</label>
                                                <p>{{datosCredito[0].cartera}} {{datosCredito[0].descripcionCartera}}</p>
                                            </div>
                                        </div-->
                                    </div>
                                    <br>
                                    <br>
                                    <!-- Agregado Prueba doc-->
                                    <div class="well comment-block row level-1" style="display:inline-block;">
                                        <h3 class="mail_head">DOCUMENTOS REQUERIDOS</h3>
                                    </div>
                                    <div class="tab-pane" id="documentos">
                                        <br>
                                        <p>
                                            <div class="row">
                                                <div class="col-xs-10">
                                                    <div class="table-responsive">
                                                        <table class="table table-bordered">
                                                            <thead style="background-color: #F8F8F8;">
                                                                <tr>
                                                                    <th>Documento</th>
                                                                    <th>Obligatorio</th>
                                                                    <th>Archivo Adjunto</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="documento in listaDocumentos">
                                                                    <td>{{ documento.nombre }}</td>
                                                                    <td>{{ documento.obligatorio }}</td>
                                                                    <td>Archivo Seleccinado </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </p>
                                    </div>
                                    <!-- Agregado Prueba doc-->
                                </div>
                                <!-- FIN CONFIRMAR DATOS-->

                                <div class="clearfix"></div>
                                <ul class="pager wizard">
                                    <li class="previous first" style="display:none;"><a href="javascript:;">First</a></li>
                                    <li class="previous"><a href="javascript:;" ng-click="setStepRemove()" ng-hide="regresaContrato == 0;" ng-show="regresaContrato == 1;">Anterior</a></li>
                                    <li class="next last disabled" style="display:none;"><a href="javascript:;">Last</a></li>
                                    <!--ng-show="folioContrato!=undefined || datosCliente==undefined || nuevoContrato.idDepartamento==undefined || nuevoContrato.idTipoContrato==undefined || nuevoContrato.fechaTermino==undefined || nuevoContrato.fechaInicio==undefined" -->
                                    <li class="next" id="btnNext"><a href="javascript:;" ng-click="cargaTiposEmpresas(datosCliente.idCliente);setStepAdd()" ng-hide="avanzaContrato == 0;" ng-show="avanzaContrato == 1;" ng-disabled="nuevoContrato.idDepartamento==undefined || nuevoContrato.idTipoContrato==undefined || nuevoContrato.fechaTermino==undefined || nuevoContrato.fechaInicio==undefined">Siguiente</a></li>
                                    <li class="finish" id="btnFinish"><a href="javascript:;" ng-click="GuardarContrato(datosCliente,nuevoContrato,datosCredito[0].limiteCredito)">Guardar</a></li>
                                </ul>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <!-- Fin Prueba de nuevo cuadro-->
    <div class="col-md-offset-7">
        <div class="form-group">
            <!--button type="button" class="btn btn-secondary" tooltip="Editar" ng-click="Editar()">Cancelar
            </button-->
            <!--button type="button" class="btn btn-primary" tooltip="Guardar" ng-click="GuardarContrato(datosCliente,nuevoContrato,datosCredito[0].limiteCredito)">Guardar
            </button-->
            <!--button type="button" class="btn btn-success" tooltip="Editar" ng-click="Editar()">Solicitar Aprobación
            </button-->
        </div>
    </div>
    <!--Modales-->
    <!-- Modal Busqueda-->
    <div class="modal fade" id="searchCliente" ng-controller="contratoController">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="Cerrar()"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Búsqueda de Clientes</h4>
                </div>
                <div class="modal-body">
                    <div class="input-group searchinResults">
                        <input type="text" class="form-control" placeholder="Introducir nombre o RFC..." ng-model="txtBusqueda">
                        <span class="input-group-btn">
                                <button class="btn btn-primary" type="button" ng-click="BuscarCliente(txtBusqueda)">Buscar</button>
                                 </span>
                    </div>
                    <!-- /input-group -->
                    <div class="tableContent">
                        <table class="table table-striped table-condensed table-hover">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nombre</th>
                                    <th>RFC</th>
                                    <!--th>Correo</th-->
                                    <th>Acción</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat=" infoCliente in listaClientes">
                                    <td> {{ infoCliente.idCliente }} </td>
                                    <td> {{ infoCliente.nombre }} </td>
                                    <td> {{ infoCliente.rfc }} </td>
                                    <!--td> {{ infoCliente.email }} </td-->
                                    <td>
                                        <button class="btn btn-primary twiter" tooltip="Ir" data-toggle="tooltip" data-placement="top" title="Seleccionar" ng-click="cargarCliente(infoCliente);">
                                            <span class="glyphicon glyphicon-hand-right" aria-hidden="true"></span>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="Regresar()">Salir</button>
                </div>
            </div>
            <!-- Fin content -->
        </div>
        <!-- Fin dialog -->
    </div>
    <!-- Modal  Busqueda-->

    <!-- Modal Confirmacion -->
    <!--div class="modal-dialog" id="confirmaContrato" ng-controller="contratoController">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">Contrato creado</h4>
            </div>
            <div class="modal-body">
                Se ha creado el Contrato!!!
            </div>
            <div class="modal-footer">
                <button class="btn btn-warning" type="button"> Aceptar</button>
            </div>
        </div>
    </div-->
    <!-- Fin Modal Confirmacion -->
    <div id="modalLotes" class="modal fade" role="dialog">
        <div class="modal-dialog animated zoomIn">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Nuevo Contrato Creado</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <p>
                                <h4><b>Folio :</b><span>{{folioContratoNuevo}}</span></h4>
                            </p>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-sm-12">
                            <!--button type="button" class="btn btn-default pull-left" data-dismiss="modal">Cerrar</button-->
                            <button data-dismiss="modal" class="btn btn-default" type="button" ng-click="Regresar()">Cerrar</button>
                        </div>
                        <!--                         <div class="col-sm-6">
                           <button class="btn btn-info"><span class="glyphicon glyphicon-file"> </span>Aceptar</button>
                       </div> -->
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script src="js/wizard/jquery.validate.min.js" type="text/javascript"></script>
<script src="js/wizard/jquery.bootstrap.wizard.min.js" type="text/javascript"></script>
<script src="js/wizard/form-validation.js" type="text/javascript"></script>
<script src="js/bootstrap-filestyle.js" type="text/javascript"></script>
<!-- <script src="js/dropzone/dropzone.min.js" type="text/javascript"></script> -->
